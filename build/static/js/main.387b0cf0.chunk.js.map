{"version":3,"sources":["firebase.js","profile.png","components/User.js","components/svg/Attachment.js","components/svg/Send.js","components/MessageForm.js","components/Messages.js","pages/Home.js","components/Loading.js","context/Auth.js","components/Navbar.js","pages/Register.js","pages/Login.js","components/svg/Camera.js","components/svg/Delete.js","pages/Profile.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","db","getFirestore","storage","getStorage","User","_ref","user","selectUser","user1","chat","user2","uid","_useState","useState","_useState2","_slicedToArray","data","setData","useEffect","id","concat","sub","onSnapshot","doc","_jsxs","className","name","onClick","children","_jsx","src","avatar","Img","alt","isOnline","from","unread","text","Attachment","xmlns","style","width","height","cursor","color","viewBox","fill","fillRule","d","clipRule","Send","sendMessage","strokeWidth","stroke","strokeLinecap","strokeLinejoin","MessageForm","setText","setImg","htmlFor","type","accept","display","onChange","e","target","files","placeholder","value","Messages","msg","scrollRef","useRef","_scrollRef$current","current","scrollIntoView","behavior","scrollToBottom","ref","media","Moment","fromNow","createdAt","toDate","Home","users","setUsers","_useState3","_useState4","setChat","_useState5","_useState6","_useState7","_useState8","img","_useState9","_useState10","msgs","setMsgs","currentUser","usersRef","collection","q","query","where","QuerySnapshot","forEach","push","msgsRef","orderBy","mssgSnap","querySnapshot","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","updateDoc","stop","_x","apply","arguments","_ref2","_callee2","url","imgRef","snap","imgLink","_context2","Date","getTime","uploadBytes","sent","getDownloadURL","fullPath","addDoc","to","Timestamp","fromDate","setDoc","margin","map","_Fragment","backgroundColor","defaultDP","length","i","Loading","position","top","left","transform","authContext","createContext","Auth","online","setOnline","loading","setLoading","setTimeout","Provider","Navbar","_useContext","useContext","navigate","useNavigate","out","signOut","Link","Register","email","password","error","handleChange","_objectSpread","_defineProperty","OnSubmit","result","preventDefault","createUserWithEmailAndPassword","t0","message","onSubmit","disabled","Login","signInWithEmailAndPassword","console","log","Camera","Delete","deleteImage","Profile","Image","setImage","setUser","getDoc","then","docSnap","exists","uploadImg","avatarPath","deleteObject","window","confirm","toDateString","App","BrowserRouter","Routes","Route","exact","path","element","Navigate","replace","ReactDOM","createRoot","document","getElementById","render","React","StrictMode"],"mappings":"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","file":"static/js/main.387b0cf0.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport {getAuth} from 'firebase/auth';\r\nimport {getFirestore} from 'firebase/firestore';\r\nimport {getStorage} from 'firebase/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDbX3CWWkUlcp18egJqw-XKZOM460huNLQ\",\r\n  authDomain: \"chatty-17768.firebaseapp.com\",\r\n  projectId: \"chatty-17768\",\r\n  storageBucket: \"chatty-17768.appspot.com\",\r\n  messagingSenderId: \"197300896016\",\r\n  appId: \"1:197300896016:web:dcbdf4b676a1796bad2595\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\n\r\n\r\nexport {auth,db,storage};\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/profile.a827c8ce.png\";","import Img from '../profile.png';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { onSnapshot, doc, updateDoc } from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\n\r\n\r\nexport default function User({user, selectUser, user1, chat}) {\r\n\r\n  const user2 = user?.uid;\r\n  \r\n  const [data, setData] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const id = user1 > user2 ? `${user2 + user1}` : `${user1 + user2}`;\r\n    \r\n\r\n\r\n    let sub = onSnapshot(doc(db, \"lastMssg\", id), (doc) => {\r\n      setData(doc.data());\r\n      \r\n    });\r\n    return () => sub();\r\n  }, []);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    \r\n    <div className={`user_wrapper ${chat.name === user.name && \"selected_user\"}`} onClick={() => selectUser(user)} >\r\n      <div className=\"user_info\">\r\n        <div className=\"user_detail\">\r\n            <img src={user.avatar || Img} alt=\"avatar\" className='avatar' />\r\n            <h4>{user.name}</h4>\r\n            \r\n            \r\n        </div>\r\n        <div className={`user_status ${user.isOnline ? \"online\" : \"offline\"}`}>\r\n\r\n        </div>\r\n      \r\n             \r\n\r\n      </div>\r\n\r\n    \r\n        {\r\n                data?.from !== user1 ? (<div className= {`lastMssgDisplay  ${data?.unread ? \"unread\" : \"read\"}  `} >{data?.text}</div>) : (<div className='lastMssgDisplay'> <em>me: </em> {data?.text}</div>)\r\n                \r\n              }\r\n        \r\n       \r\n      \r\n      <hr />\r\n    </div>\r\n    \r\n  )\r\n}\r\n","import React from \"react\";\r\n\r\nconst Attachment = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      style={{\r\n        width: \"25px\",\r\n        height: \"25px\",\r\n        cursor: \"pointer\",\r\n        color: \"gray\",\r\n      }}\r\n      viewBox=\"0 0 20 20\"\r\n      fill=\"currentColor\"\r\n    >\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z\"\r\n        clipRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Attachment;","import React from \"react\";\r\n\r\nconst Send = ({sendMessage}) => {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" onClick={() => sendMessage()} style={{ width: \"25px\", height: \"25px\", cursor: \"pointer\" }} fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\" />\r\n</svg>\r\n  );\r\n};\r\n\r\nexport default Send;\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport Attachment from './svg/Attachment';\r\nimport Send from './svg/Send';\r\n\r\nexport default function MessageForm({ sendMessage, text, setText, setImg }) {\r\n  return (\r\n    <form className = 'message_form'>\r\n        <label htmlFor=\"img\">\r\n            <Attachment/>\r\n        </label>\r\n        <input type = \"file\" id = \"img\" accept ='image/*' style={{display: \"none\"}} onChange = {(e) => setImg(e.target.files[0])}/>\r\n        <div>\r\n            <input type=\"text\" placeholder='Send a message' value = {text} onChange = {(e) => setText(e.target.value)} />\r\n        </div>\r\n        <div>\r\n            <Send sendMessage={sendMessage}/>\r\n        </div>\r\n    </form>\r\n  )\r\n}\r\n","import React, { useEffect, useRef} from 'react'\r\nimport Moment from 'react-moment';\r\n\r\n\r\n\r\n\r\nexport default function Messages({msg, user1}) {\r\n\r\n  const scrollRef = useRef();\r\n\r\n  const scrollToBottom = () => {\r\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n  }\r\n\r\n  useEffect(() => {\r\n    scrollToBottom()\r\n   \r\n  }, [msg]);\r\n\r\n\r\n\r\n  return (\r\n   \r\n    <div className={`message_wrapper ${msg.from===user1 ? \"own\" : \"\"}` } ref={scrollRef} >\r\n      <p className={msg.from === user1 ? \"me\" : \"friend\" }>\r\n        {msg.media ? <img src={msg.media} alt={msg.text} /> : null }\r\n        {msg.text}\r\n        <br />\r\n        <small>\r\n            <Moment fromNow>{msg.createdAt.toDate()}</Moment>\r\n        </small>\r\n      </p>\r\n    </div>\r\n    \r\n  )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { db, auth, storage} from \"../firebase\";\r\nimport{ref, getDownloadURL, uploadBytes} from 'firebase/storage';\r\nimport {collection,query,where,onSnapshot, addDoc, Timestamp, orderBy, setDoc, doc, updateDoc, getDoc, getDocs} from \"firebase/firestore\";\r\nimport User from '../components/User';\r\nimport MessageForm from '../components/MessageForm';\r\nimport Messages from '../components/Messages';\r\nimport defaultDP from '../profile.png';\r\n\r\n\r\n\r\n\r\nexport default  function Home() {\r\n  const [users, setUsers] = useState([]);\r\n  const [chat, setChat] = useState(\"\");\r\n  const [text, setText] = useState('');\r\n  const [img, setImg] = useState(\"\");\r\n  const [msgs, setMsgs] = useState([]);\r\n  \r\n\r\n  // user who is running the app\r\n\r\n  \r\n  let user1 = (auth.currentUser ?  auth.currentUser.uid : null);\r\n  \r\n  useEffect(() => {\r\n    user1 = auth.currentUser.uid;\r\n    const usersRef = collection(db, \"users\");\r\n    \r\n    // create a query object\r\n    const q = query(usersRef, where(\"uid\", \"not-in\", [(user1) ? (user1) : (null)]));\r\n    \r\n    // execute the query with realtime listner\r\n\r\n      const sub = onSnapshot(q, (QuerySnapshot) => {\r\n      let users = [];\r\n      QuerySnapshot.forEach((doc) => {\r\n        users.push(doc.data());\r\n      });\r\n      setUsers(users);\r\n    });\r\n    \r\n    return () => sub();\r\n\r\n    \r\n\r\n  \r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n\r\n    const user2 = chat.uid;\r\n    const id = user1>user2 ? user2 + user1 : user1 + user2;\r\n\r\n    if(chat.id!==0){\r\n    const msgsRef = collection(db, \"message\", id, \"chat\");\r\n    const q = query(msgsRef, orderBy(\"createdAt\", \"asc\"));\r\n\r\n    const mssgSnap = onSnapshot(q, (querySnapshot) => {\r\n      let msgs = [];\r\n      querySnapshot.forEach((doc) => {\r\n        msgs.push(doc.data());\r\n      });\r\n      setMsgs(msgs);\r\n    });\r\n\r\n   \r\n    return () => mssgSnap();\r\n  }\r\n\r\n\r\n  },[chat]);\r\n  \r\n\r\n  // function for selecting user and acitvating the chat\r\n\r\n  const selectUser =  async (user) => {\r\n    setChat(user);\r\n    const user2 = user.uid;\r\n    const id = user1>user2 ? user2 + user1 : user1 + user2;\r\n\r\n    \r\n\r\n    \r\n\r\n    await updateDoc(doc(db, \"lastMssg\", id), {\r\n\r\n      unread: false\r\n\r\n    })\r\n\r\n\r\n    \r\n\r\n   \r\n \r\n\r\n  }\r\n\r\n  // function for sending message and saving it on firestorage\r\n\r\n  const sendMessage = async () => {\r\n    \r\n\r\n    // user friend\r\n    const user2 = chat.uid;\r\n\r\n    // making unique identifier for sotring mssg of two users\r\n    const id  = user1>user2 ? (user2 + user1) : (user1 + user2);\r\n\r\n    let url;\r\n\r\n    if(img){\r\n      const imgRef = ref(storage, `images/${new Date().getTime()} - ${img.name} `);\r\n      const snap = await uploadBytes(imgRef, img);\r\n      const imgLink = await getDownloadURL(ref(storage, snap.ref.fullPath));\r\n      url = imgLink;\r\n    }\r\n\r\n    await addDoc(collection(db, \"message\", id, \"chat\"), {\r\n      text,\r\n      from: user1,\r\n      to: user2,\r\n      createdAt: Timestamp.fromDate(new Date()),\r\n      media: url ? url : \"\"\r\n    })\r\n\r\n\r\n \r\n\r\n    // making new collection for the latest send mssg b/w two users\r\n\r\n    await setDoc(doc(db, \"lastMssg\", id), {\r\n      text,\r\n      from: user1,\r\n      to: user2,\r\n      createdAt: Timestamp.fromDate(new Date()),\r\n      media: url || \"\",\r\n      unread: true,\r\n    });\r\n\r\n\r\n    setText(\"\");\r\n    setImg(\"\");\r\n\r\n  }\r\n\r\nif(!user1){\r\n  return (null);\r\n}\r\n\r\n\r\n  \r\n    return (\r\n      <div className='home_container'>\r\n        <div className=\"users_container\" style={{margin:\"5px\"}}>\r\n          {users.map(user => <User key = {user.uid} user = {user} user1 ={user1} chat ={chat} selectUser = {selectUser}/>)}\r\n          \r\n          \r\n        </div>\r\n\r\n        <div className= {`messages_container ${!chat ? \"empty\" : null}`}   >\r\n          {chat ? (\r\n            <>\r\n          <div className=\"messages_user\" style = {{backgroundColor: \"#f0f2f5\"}} >\r\n            <span><img src={chat.avatar||defaultDP} alt=\"\" /></span>\r\n            <span><h3>{chat.name}</h3></span>\r\n          </div>\r\n          <div className=\"messages\" >\r\n            {msgs.length ? (msgs.map((msg,i)=> (\r\n               <Messages key = {i} msg = {msg} user1 = {user1} /> \r\n          ))) : (null)}\r\n           \r\n      \r\n          \r\n          <MessageForm text = {text} setText = {setText} sendMessage={sendMessage} img = {img} setImg = {setImg}/>\r\n          </div>\r\n          \r\n          </>) : <div className=\"wp no_conv\"><h3 className ='no_conv'> Select a user to start conversation </h3>\r\n          \r\n            <h2>Chatty</h2>\r\n           </div> }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n \r\n  \r\n\r\n","import React from \"react\";\r\n\r\nconst Loading = () => {\r\n  return (\r\n    <div style={{ position: \"relative\" }}>\r\n      <h2\r\n        style={{\r\n          position: \"fixed\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n        }}\r\n      >\r\n        Loading...\r\n      </h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;","import { createContext } from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport Loading from '../components/Loading';\r\nimport { auth } from '../firebase';\r\n\r\n\r\n\r\n\r\nimport React from 'react'\r\n\r\nconst authContext = createContext();\r\n\r\n\r\n\r\n\r\nexport default function Auth({children}) {\r\n\r\n    const [online, setOnline] = useState(auth.currentUser);\r\n    const [loading, setLoading] = useState(true);\r\n  \r\n\r\n\r\n    useEffect(() => {\r\n      setTimeout(() => {\r\n        setLoading(false);\r\n        setOnline(auth.currentUser ? true: false)\r\n      },1000)\r\n      }, []);\r\n\r\n\r\n     \r\n     \r\n\r\n      while(loading){\r\n        return <Loading />;\r\n      }\r\n\r\n        return (\r\n          <authContext.Provider value={{online, setOnline}}>\r\n            {children}\r\n          </authContext.Provider>\r\n        )\r\n      \r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport {authContext};\r\n","import React from 'react';\r\nimport {Link, useNavigate} from 'react-router-dom';\r\nimport {signOut} from 'firebase/auth';\r\nimport{auth,db} from '../firebase';\r\nimport{doc, updateDoc} from 'firebase/firestore';\r\nimport { useContext } from 'react';\r\nimport { authContext } from '../context/Auth';\r\n\r\n\r\n\r\nexport default function Navbar() {\r\n\r\n  const {online ,setOnline} = useContext(authContext);\r\n\r\n \r\n  const navigate = useNavigate();\r\n\r\n  const out = async () => {\r\n    await updateDoc(doc(db,\"users\", auth.currentUser.uid), {\r\n      isOnline: false\r\n    })\r\n\r\n    await signOut(auth);\r\n    setOnline(false);\r\n    navigate('/login');\r\n\r\n  }\r\n  return (\r\n    <nav>\r\n        <h2>\r\n            <Link to =\"/\">Chatty</Link>\r\n        </h2>\r\n        <div>\r\n\r\n            {online ? <>\r\n            <Link to =\"/profile\">Profile</Link>\r\n            <Link to = \"/\" onClick={out}>Log Out</Link>\r\n            </>:<>\r\n            <Link to =\"/register\">Register</Link>\r\n            <Link to = \"/login\" >Log In</Link>\r\n            </>}\r\n            \r\n        </div>\r\n      \r\n    </nav>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react';\r\nimport {auth,db} from  '../firebase';\r\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport {setDoc, doc, Timestamp} from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useContext } from 'react';\r\nimport {authContext} from '../context/Auth';\r\n\r\n\r\nexport default function Register() {\r\n  const {setOnline} = useContext(authContext);\r\n  \r\n    const navigate = useNavigate();\r\n    const [data, setData] = useState({\r\n        name:\"\",\r\n        email:\"\",\r\n        password:\"\",\r\n        error:null,\r\n        loading:false\r\n    })\r\n\r\n    const { name, email, password, error, loading} = data;\r\n    \r\n\r\n    const handleChange = (e) => {\r\n            setData({...data, [e.target.name]:e.target.value})\r\n    }\r\n\r\n    \r\n\r\n    \r\n    const OnSubmit =   async(e) => {\r\n            e.preventDefault();\r\n            setData({...data, error:null, loading:true});\r\n            \r\n            if(!name||!email||!password){\r\n                setData({...data,error:\"All fields are mandatory!\",loading:false})\r\n                  \r\n            }\r\n\r\n            else{\r\n            try {\r\n\r\n              // will register user here\r\n              const result = await createUserWithEmailAndPassword(auth, email, password);\r\n              await setDoc(doc(db,\"users\", result.user.uid), {\r\n                uid: result.user.uid,\r\n                name,\r\n                email,\r\n                createdAt: Timestamp.fromDate(new Date()),\r\n                isOnline: true\r\n              });\r\n\r\n              // Make Form UI empty by emptying all the fields in the form\r\n\r\n              setData({\r\n                name:\"\",\r\n                email:\"\",\r\n                password:\"\",\r\n                error:null,\r\n                loading:false\r\n              })\r\n\r\n              setOnline(true);\r\n              \r\n              navigate('/');\r\n\r\n            } catch (error) {\r\n              \r\n              setData({...data, error:error.message, loading:false});\r\n            }\r\n          }\r\n            \r\n    }\r\n   \r\n\r\n\r\n  return (\r\n    <section>\r\n      <h3>Create An Account</h3>\r\n      <form className='form' onSubmit={ OnSubmit}>\r\n        <div className=\"input_container\">\r\n            <label htmlFor=\"name\">Name</label>\r\n            <input type=\"text\" name = \"name\" value = {name} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"input_container\">\r\n            <label htmlFor=\"email\">E-mail</label>\r\n            <input type=\"text\" name = \"email\" value = {email} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"input_container\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input type=\"text\" name = \"password\" value = {password} onChange={handleChange}  />\r\n        </div>\r\n        <div className=\"btn_container\">\r\n            \r\n        {\r\n            error?<p className='error'> {error}</p> : <p className='error' ></p> \r\n        }\r\n       \r\n            <button className=\"btn\"  disabled ={loading}  >{loading? 'creating...':'Register'}</button>\r\n       \r\n      \r\n        </div>\r\n      \r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react';\r\nimport {auth,db} from  '../firebase';\r\nimport { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport {doc, updateDoc} from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useContext } from 'react';\r\nimport {authContext} from '../context/Auth';\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default function Login() {\r\n    const {setOnline} = useContext(authContext);\r\n\r\n    const navigate = useNavigate();\r\n    const [data, setData] = useState({\r\n        \r\n        email:\"\",\r\n        password:\"\",\r\n        error:null,\r\n        loading:false\r\n    })\r\n\r\n    const {email, password, error, loading} = data;\r\n    \r\n\r\n    const handleChange = (e) => {\r\n            setData({...data, [e.target.name]:e.target.value})\r\n    }\r\n\r\n    \r\n\r\n   \r\n    const OnSubmit =  async (e) => {\r\n            e.preventDefault();\r\n            setData({...data, error:null, loading:true})\r\n            if(!email||!password){\r\n                setData({...data,error:\"All fields are mandatory!\",loading:false})\r\n                \r\n                   \r\n            }\r\n\r\n            else{\r\n            try {\r\n              // will Log In user here\r\n              const result = await signInWithEmailAndPassword(auth, email, password);\r\n              await updateDoc(doc(db, \"users\", result.user.uid), {\r\n                isOnline: true\r\n              })\r\n             \r\n\r\n              // Make Form UI empty by emptying all the fields in the form\r\n\r\n              setData({\r\n                email:\"\",\r\n                password:\"\",\r\n                error:null,\r\n                loading:false\r\n              })\r\n\r\n              setOnline(true);\r\n              navigate('/');\r\n              \r\n              \r\n\r\n            } catch (error) {\r\n              console.log(error.message);\r\n              setData({...data, error:error.message, loading:false})\r\n            }\r\n          }\r\n            \r\n    }\r\n\r\n  return (\r\n    <section>\r\n      <h3>Log In to your Account</h3>\r\n      <form className='form' onSubmit={ OnSubmit}>\r\n        \r\n        <div className=\"input_container\">\r\n            <label htmlFor=\"email\">E-mail</label>\r\n            <input type=\"text\" name = \"email\" value = {email} onChange={handleChange} />\r\n        </div>\r\n        <div className=\"input_container\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input type=\"text\" name = \"password\" value = {password} onChange={handleChange}  />\r\n        </div>\r\n        <div className=\"btn_container\">\r\n            \r\n        {\r\n            error?<p className='error'> {error}</p> : <p className='error' ></p> \r\n        }\r\n       \r\n            <button className=\"btn\"  disabled ={loading} >{loading? \"Logging in...\": \"Log In\"}</button>\r\n       \r\n      \r\n        </div>\r\n      \r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n","import React from \"react\";\r\n\r\nconst Camera = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      style={{ width: \"25px\", height: \"25px\", cursor: \"pointer\" }}\r\n      viewBox=\"0 0 20 20\"\r\n      fill=\"currentColor\"\r\n    >\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        d=\"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z\"\r\n        clipRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Camera;","import React from \"react\";\r\n\r\nconst Delete = ({ deleteImage }) => {\r\n  return (\r\n    <svg\r\n      onClick={deleteImage}\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      style={{\r\n        width: \"25px\",\r\n        height: \"25px\",\r\n        cursor: \"pointer\",\r\n        color: \"#f24957\",\r\n      }}\r\n      viewBox=\"0 0 20 20\"\r\n      fill=\"currentColor\"\r\n    >\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\"\r\n        clipRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Delete;","import React, { useEffect } from 'react'\r\nimport Img from \"../profile.png\";\r\nimport Camera from '../components/svg/Camera';\r\nimport Delete from \"../components/svg/Delete\";\r\nimport { useState } from 'react';\r\nimport { storage, db, auth } from '../firebase';\r\nimport { getDoc, doc, updateDoc } from \"firebase/firestore\";\r\nimport{ref, getDownloadURL, uploadBytes, deleteObject} from 'firebase/storage';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nexport default function Profile() {\r\n    const [Image, setImage] = useState('');\r\n    const [user, setUser] = useState();\r\n    const navigate = useNavigate(\"\");\r\n    \r\n    \r\n    useEffect(()=>{\r\n        // get the current active user\r\n        getDoc(doc(db, \"users\", auth.currentUser.uid)).then((docSnap) => {\r\n            if (docSnap.exists) {\r\n              setUser(docSnap.data());\r\n            }\r\n          });\r\n        \r\n        if (Image) {\r\n            // function for uploading the image\r\n        const uploadImg = async () => {\r\n            const imgRef = ref(\r\n            storage,\r\n            `avatar/${new Date().getTime()} - ${Image.name}`\r\n            );\r\n\r\n            try {\r\n            if (user.avatarPath) {\r\n                await deleteObject(ref(storage, user.avatarPath));\r\n            }\r\n            const snap = await uploadBytes(imgRef, Image);\r\n            const url = await getDownloadURL(ref(storage, snap.ref.fullPath));\r\n    \r\n            await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\r\n                avatar: url,\r\n                avatarPath: snap.ref.fullPath,\r\n            });\r\n    \r\n            setImage(\"\");\r\n            } catch (err) {\r\n            console.log(err.message);\r\n            }\r\n        };\r\n        uploadImg();\r\n        }\r\n\r\n    }, [Image])\r\n\r\n    // function for deleting the image\r\n\r\n    const deleteImage = async () => {\r\n        try {\r\n          const confirm = window.confirm(\"Delete DP?\");\r\n          if (confirm) {\r\n            await deleteObject(ref(storage, user.avatarPath));\r\n    \r\n            await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\r\n              avatar: \"\",\r\n              avatarPath: \"\",\r\n            });\r\n            navigate(\"/\");\r\n          }\r\n        } catch (err) {\r\n          console.log(err.message);\r\n        }\r\n      };\r\n  \r\n      if(!user){\r\n        return(null);\r\n      }\r\n\r\n  return (\r\n      <div className='profile_background' >\r\n    <section className=\"profile_container profile_section\" > \r\n   \r\n        <div className=\"img_container\">\r\n            <img src={(user) ? (user.avatar||Img):(Img)} alt=\"DP\" />\r\n            <div className=\"overlay\">\r\n                <div>\r\n                    <label htmlFor=\"photo\">\r\n                        <Camera/>\r\n                    </label>\r\n                    {user&&user.avatar ? <Delete deleteImage={deleteImage} /> : null}\r\n                    <input type=\"file\" accept='image/*' id = 'photo' style={{display:\"none\"}} onChange={(e) => setImage(e.target.files[0])} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"text_container\">\r\n            <h3>{(user) ? (user.name):null}</h3>\r\n            <p>{(user) ? (user.email):null}</p>\r\n            <hr />\r\n            <small>Joined on {(user) ? user.createdAt.toDate().toDateString() : null}</small>\r\n        </div>\r\n      \r\n    </section>\r\n      </div>\r\n  )\r\n}","import {BrowserRouter, Routes, Route} from 'react-router-dom';\r\nimport Home from './pages/Home';\r\nimport Navbar from './components/Navbar';\r\nimport Register from './pages/Register';\r\nimport Login from './pages/Login';\r\nimport Profile from './pages/Profile';\r\nimport './App.css';\r\nimport {authContext} from './context/Auth'\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useContext } from 'react';\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n  const {online} = useContext(authContext);\r\n  return (\r\n    <BrowserRouter>\r\n      <Navbar/>\r\n      <Routes>\r\n\r\n        <Route exact path='/' element={online ? <Home /> : <Navigate replace to={'/login'} />}/>\r\n        {/* <Route exact path = '/' element={<Home/>}/> */}\r\n        <Route exact path ='/register' element={<Register/>}/>\r\n        <Route exact path ='/login' element={<Login/>}/>\r\n        <Route exact path = '/profile' element={ online ? <Profile/> : <Navigate replace to={'/login'}/>}/>\r\n\r\n        </Routes>\r\n        \r\n\r\n        \r\n     \r\n    \r\n   \r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './App';\r\nimport Auth from './context/Auth';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <Auth>\r\n    <App />\r\n    </Auth>\r\n  </React.StrictMode>\r\n);\r\n\r\n\r\n"],"sourceRoot":""}